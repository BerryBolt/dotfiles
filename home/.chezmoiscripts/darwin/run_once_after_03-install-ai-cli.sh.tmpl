#!/bin/bash
# Install AI CLI based on user choice

set -e

# Ensure mise shims are in PATH
eval "$(mise activate bash)"

AI_CLI="{{ .ai_cli }}"

case "$AI_CLI" in
  "claude"|"claude-code")
    echo "Installing Claude CLI..."
    # Native installer (recommended, npm is deprecated)
    curl -fsSL https://claude.ai/install.sh | sh
    echo "Claude CLI installed. Run 'claude' to start."
    ;;
  "codex")
    echo "Installing OpenAI Codex CLI..."
    # Codex requires npm, install node first
    mise use node@latest
    npm install -g @openai/codex
    echo "Codex CLI installed. Run 'codex' to start."
    ;;
  "none")
    echo "Skipping AI CLI installation."
    ;;
  *)
    echo "Unknown AI CLI choice: $AI_CLI"
    ;;
esac
